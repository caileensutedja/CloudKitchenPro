<div class="row">
  <div class="text-center mb-4">
    <h2 class="fw-bold">Detailed Recipe of {{recipe.title}}</h2>
    <div class="text-end mb-3">
      <button class="btn btn-dark" routerLink="/34375783/recipe/view">View All Recipes</button>
    </div>
  </div>

  <!-- Recipe Information Card -->
  <div class="col-md-4 mb-3">
    <div class="card h-100 text-black">
      <div class="card-header fw-bold">Recipe Information</div>
      <div class="card-body">
        <h5 class="card-title">{{recipe.title}}</h5>
        <h6 class="card-subtitle mb-2 text-muted">by {{recipe.chef}}</h6>
        <p class="card-text">
          <strong>Meal Type:</strong> {{recipe.mealType}}<br>
          <strong>Cuisine:</strong> {{recipe.cuisineType}}<br>
          <strong>Prep Time:</strong> {{recipe.prepTime}} minutes<br>
          <strong>Difficulty:</strong> {{recipe.difficulty}}<br>
          <strong>Servings:</strong> {{recipe.servings}}<br>
          <strong>Created:</strong> {{recipe.createdAt | date:'yyyy-MM-dd'}}
        </p>
      </div>
    </div>
  </div>

  <!-- Ingredients Card -->
  <div class="col-md-4 mb-3">
    <div class="card h-100 text-black">
      <div class="card-header fw-bold">Ingredients ({{recipe.ingredients.length}} items)</div>
      <div class="card-body">
        <ul>
          @for(ingredient of recipe.ingredients; track $index) {
            <li>{{ingredient}}</li>
          }
        </ul>
        <button class="btn btn-primary" (click)="text2speech(recipe.ingredients)">
          Play
        </button>
      </div>
    </div>
  </div>

  <!-- Instructions Card -->
  <div class="col-md-4 mb-3">
    <div class="card h-100 text-black">
      <div class="card-header fw-bold">Instructions ({{recipe.instructions.length}} steps)</div>
      <div class="card-body">
        <ol>
          @for(step of recipe.instructions; track $index) {
            <li>{{step}}</li>
          }
        </ol>
        <button class="btn btn-primary" (click)="text2speech(recipe.instructions)">
          Play
        </button>
      </div>
    </div>
  </div>
  
<div class="card h-100 text-black">
  <div class="card-header fw-bold">AI Health Analysis</div>
  <div class="card-body">
    <button class="btn btn-primary mb-3" (click)="generateAIResponse()">AI Help Me!</button>
    <div>{{ geminiAnswer }}</div>
    <!-- Spinner while loading -->
    <div *ngIf="loadingAI" class="text-center my-3">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p>Loading AI response...</p>
    </div>